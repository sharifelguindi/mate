{% extends "base.html" %}

{% block title %}
  Vite + HTMX + Alpine Test
{% endblock title %}
{% block content %}
  <div class="container py-5">
    <h1>Vite + HTMX + Alpine.js Test Page</h1>
    <div class="row mt-5">
      <!-- HTMX Test -->
      <div class="col-md-6">
        <h2>HTMX Test</h2>
        <button hx-get="{% url 'api:user-me' %}"
                hx-target="#htmx-result"
                hx-indicator="#spinner"
                class="btn btn-primary">Load User Info via HTMX</button>
        <span id="spinner" class="htmx-indicator ms-2">
          <span class="spinner-border spinner-border-sm" role="status">
            <span class="visually-hidden">Loading...</span>
          </span>
        </span>
        <div id="htmx-result" class="mt-3 p-3 bg-light rounded"></div>
      </div>
      <!-- Alpine.js Test -->
      <div class="col-md-6">
        <h2>Alpine.js Test</h2>
        <div x-data="{ count: 0, message: 'Hello from Alpine!' }">
          <p x-text="message" class="mb-3"></p>
          <button @click="count++" class="btn btn-success">
            Clicked <span x-text="count"></span> times
          </button>
          <div x-show="count > 0" x-transition class="mt-3 alert alert-info">You've clicked the button!</div>
        </div>
      </div>
    </div>
    <!-- Combined HTMX + Alpine Test -->
    <div class="row mt-5">
      <div class="col-12">
        <h2>Combined HTMX + Alpine Test</h2>
        <div x-data="{ loading: false }">
          <button hx-get="{% url 'home' %}"
                  hx-target="#combined-result"
                  hx-swap="innerHTML"
                  @htmx:before-request="loading = true"
                  @htmx:after-request="loading = false"
                  class="btn btn-warning"
                  :disabled="loading">
            <span x-show="!loading">Load Home Page Content</span>
            <span x-show="loading">Loading...</span>
          </button>
          <div id="combined-result" class="mt-3"></div>
        </div>
      </div>
    </div>
    <!-- Vite HMR Test -->
    <div class="row mt-5">
      <div class="col-12">
        <h2>Vite HMR Test</h2>
        <p class="text-muted">
          Open frontend/src/styles/main.css and change some colors.
          The page should update without refreshing!
        </p>
      </div>
    </div>
  </div>
  <!-- Add CSRF token for HTMX -->
  {% csrf_token %}
{% endblock content %}
